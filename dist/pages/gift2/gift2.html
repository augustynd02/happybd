<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tw贸j drugi prezent...</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body class="center">
  <h1>Otw贸rz sw贸j prezent!</h1>
  <svg class="ring hidden" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--emojione" preserveAspectRatio="xMidYMid meet" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M32 61.9c-11.6 0-21-9.5-21-21.3s9.4-21.3 21-21.3S53 29 53 40.7s-9.4 21.2-21 21.2m0-38.1c-9.2 0-16.7 7.6-16.7 16.9c0 9.3 7.5 16.9 16.7 16.9S48.7 50 48.7 40.7c0-9.4-7.5-16.9-16.7-16.9" fill="#d0d0d0"> </path> <path d="M25.5 59c-1.9-.6-3.6-1.6-5.2-2.7c-1.6-1.2-3-2.6-4.2-4.1c-2.4-3.2-3.8-7.1-3.9-11.1c-.1-4 1-8 3.3-11.3c1.1-1.6 2.5-3.1 4-4.4c1.5-1.2 3.2-2.3 5-3c-3.4 1.8-6.4 4.5-8.4 7.8c-2 3.2-3.1 7.1-2.9 10.9c.1 3.8 1.4 7.5 3.6 10.7c2.1 3 5.2 5.5 8.7 7.2" fill="#ffffff"> </path> <path d="M39.6 22.4c1.8.7 3.5 1.8 5 3s2.9 2.7 4 4.4C50.8 33 52 37.1 51.9 41c-.1 4-1.5 7.9-3.9 11.1c-1.2 1.6-2.6 3-4.2 4.1c-1.6 1.1-3.4 2.1-5.2 2.7c3.5-1.6 6.6-4.1 8.8-7.3c2.2-3.1 3.5-6.9 3.6-10.7c0-3.7-1-7.5-3-10.7c-2-3.3-5-6-8.4-7.8" fill="#a5a5a5"> </path> <path fill="#d0d0d0" d="M25.5 15l6.5 6.6l6.5-6.6z"> </path> <path fill="#a5a5a5" d="M34.2 15l-1.5 4.4l1.3.1l4.5-4.5z"> </path> <path fill="#bb6ddf" d="M28.8 1.9l-1.1 6.6h-8.6l3.2-6.6z"> </path> <g fill="#b142b3"> <path d="M27.7 8.5l2.1 6.5h-4.3l-6.4-6.5z"> </path> <path d="M28.8 1.9l-1.1 6.6h8.6l-1.1-6.6z"> </path> </g> <g fill="#a859e8"> <path d="M35.2 1.9l1.1 6.6h8.6l-3.2-6.6z"> </path> <path d="M27.7 8.5l2.1 6.5h4.4l2.1-6.5z"> </path> </g> <path fill="#bc53ca" d="M36.3 8.5L34.2 15h4.3l6.4-6.5z"> </path> </g></svg>
  <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 0 512 512" xml:space="preserve" width="256px" height="256px" fill="#000000" class="present">
    <g id="SVGRepo_bgCarrier" stroke-width="0" />

    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

    <g id="SVGRepo_iconCarrier">
      <g>
        <g>
          <path style="fill: #f0f0f0"
            d="M480,252c-4.422,0-8,3.582-8,8H40c0-4.418-3.578-8-8-8s-8,3.582-8,8v208c0,22.055,17.945,40,40,40 h384c22.055,0,40-17.945,40-40V260C488,255.582,484.422,252,480,252z" />
        </g>
        <g>
          <path style="fill: #eca9fe"
            d="M480,164H32c-17.648,0-32,14.355-32,32v48c0,17.645,14.352,32,32,32h448c17.648,0,32-14.355,32-32 v-48C512,178.355,497.648,164,480,164z" />
        </g>
        <g>
          <g>
            <rect x="224" y="156" style="fill: #56047c" width="64" height="352" />
          </g>
        </g>
        <g>
          <g>
            <polygon style="fill: #c224ad" points="224,407.313 288,471.313 288,448.688 224,384.688 " />
          </g>
          <g>
            <polygon style="fill: #c224ad" points="224,367.313 288,431.313 288,408.688 224,344.688 " />
          </g>
          <g>
            <polygon style="fill: #c224ad" points="288,231.313 288,208.688 235.313,156 224,156 224,167.313 " />
          </g>
          <g>
            <polygon style="fill: #c224ad" points="224,327.313 288,391.313 288,368.688 224,304.688 " />
          </g>
          <g>
            <polygon style="fill: #c224ad" points="224,424.688 224,447.313 284.688,508 288,508 288,488.688 " />
          </g>
          <g>
            <polygon style="fill: #c224ad" points="224,287.313 288,351.313 288,328.688 224,264.688 " />
          </g>
          <g>
            <polygon style="fill: #c224ad" points="224,207.313 288,271.313 288,248.688 224,184.688 " />
          </g>
          <g>
            <polygon style="fill: #c224ad" points="267.313,508 224,464.688 224,487.313 244.688,508 " />
          </g>
          <g>
            <polygon style="fill: #c224ad" points="224,247.313 288,311.313 288,288.688 224,224.688 " />
          </g>
        </g>
        <g>
          <path style="fill: #c224ad"
            d="M424,291.969c-31.586,0-50.203-32.934-68.203-64.785c-13.333-23.584-27.024-47.742-46.855-58.039 c37.64-14.671,85.006-34.957,99.145-49.094c26.516-26.512,26.516-69.652,0-96.164c-26.516-26.516-69.656-26.516-96.172,0 C295.42,40.378,270.544,102.129,256,140.862c-14.544-38.732-39.42-100.484-55.914-116.975c-26.516-26.516-69.656-26.516-96.172,0 c-26.516,26.512-26.516,69.652,0,96.164c14.139,14.137,61.504,34.423,99.145,49.094c-19.832,10.297-33.522,34.455-46.855,58.039 c-18,31.852-36.617,64.785-68.203,64.785c-6.625,0-12,5.371-12,12s5.375,12,12,12c45.586,0,68.703-40.895,89.094-76.977 c14.836-26.238,28.844-51.023,46.906-51.023V188h64v-0.031c18.063,0,32.07,24.785,46.906,51.023 c20.391,36.082,43.508,76.977,89.094,76.977c6.625,0,12-5.371,12-12S430.625,291.969,424,291.969z M328.883,40.855 c8.578-8.578,19.844-12.863,31.117-12.863c11.266,0,22.539,4.289,31.117,12.863c17.156,17.156,17.156,45.07,0,62.227 c-12.219,12.219-69.773,36.078-115.156,52.926C292.805,110.625,316.664,53.074,328.883,40.855z M120.883,40.855 c8.578-8.578,19.844-12.863,31.117-12.863c11.266,0,22.539,4.289,31.117,12.863c12.219,12.219,36.078,69.77,52.922,115.152 c-45.383-16.848-102.938-40.707-115.156-52.926C103.727,85.926,103.727,58.012,120.883,40.855z" />
        </g>
      </g>
    </g>
  </svg>
  <p class="hidden">...sp贸jrz obok siebie :></p>
  <script defer>
    class Confetti {
      constructor(root) {
        this.root = root;
        this.canvas = document.createElement("canvas");
        this.ctx = this.canvas.getContext("2d");
        this.root.appendChild(this.canvas);

        this.canvas.width = this.root.offsetWidth;
        this.canvas.height = this.root.offsetHeight;

        this.confettis = [];

        this.animate();
      }

      getRandomNumber(min, max) {
        return Math.random() * (max - min) + min;
      }

      createConfetti() {
        const x = this.getRandomNumber(0, this.canvas.width);
        const y = this.getRandomNumber(-this.canvas.height, 0);
        const rotation = this.getRandomNumber(0, 2 * Math.PI);
        const color =
          "#" + (Math.random().toString(16) + "000000").substring(2, 8);
        const speed = this.getRandomNumber(3, 5);
        const size = this.getRandomNumber(5, 15);

        const confetti = {
          x,
          y,
          rotation,
          color,
          speed,
          size,
        };

        this.confettis.push(confetti);
      }

      removeOffScreenConfetti() {
        this.confettis = this.confettis.filter(
          (confetti) => confetti.y <= this.canvas.height
        );
      }

      drawConfetti(confetti) {
        this.ctx.save();
        this.ctx.translate(confetti.x, confetti.y);
        this.ctx.rotate(confetti.rotation);
        this.ctx.fillStyle = confetti.color;
        this.ctx.fillRect(
          -confetti.size / 2,
          -confetti.size / 2,
          confetti.size,
          confetti.size
        );
        this.ctx.restore();
      }

      updateConfetti(confetti) {
        confetti.y += confetti.speed;
        if (confetti.y > this.canvas.height) {
          confetti.y = this.getRandomNumber(-this.canvas.height, 0);
          confetti.x = this.getRandomNumber(0, this.canvas.width);
          confetti.speed = this.getRandomNumber(3, 6);
          confetti.size = this.getRandomNumber(5, 15);
        }
      }

      stopAnimationAfterTimeout(timeout) {
        setTimeout(() => {
          this.animationStopped = true;
        }, timeout);
      }

      animate() {
        requestAnimationFrame(() => this.animate());

        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

        if (Math.random() < 0.2) {
          this.createConfetti();
        }

        this.confettis.forEach((confetti) => {
          this.updateConfetti(confetti);
          this.drawConfetti(confetti);
        });

        this.removeOffScreenConfetti();
      }
    }

    const root = document.querySelector("body");
    const present = document.querySelector(".present");
    const ring = document.querySelector(".ring");
    const p = document.querySelector("p");

    present.addEventListener("click", () => {
      clickCounter++;
      if (clickCounter == 10) {
        present.classList.add("hide");
        ring.classList.remove("hidden");
        new Confetti(root);
      }
      present.classList.remove("shake");
      setTimeout(() => {
        present.classList.add("shake");
      }, 0);
    });
    present.addEventListener("animationend", (e) => {
      if (e.animationName == "hide") {
        root.removeChild(present);
        p.classList.remove("hidden");
      }
    });

    let clickCounter = 0;
  </script>
</body>

</html>
